- trigger:
    - trigger: state
      entity_id:
        - binary_sensor.ihc1_input_00
      to: "off"
      id: Input_00K
      from: "on"
      variables:
        action_id: switch.toggle
        target_ent: switch.ihc1_output_00
    - trigger: state
      entity_id:
        - binary_sensor.ihc1_input_00
      to: "on"
      id: Input_00L
      for:
        hours: 0
        minutes: 0
        seconds: 1
      variables:
        action_id: switch.turn_off
        target_ent: switch.ihc1_output_00
    - trigger: state
      entity_id:
        - binary_sensor.ihc1_input_08
      to: "off"
      id: Input_08K
      from: "on"
      variables:
        action_id: switch.turn_on
        target_ent: switch.ihc1_output_08
    - trigger: state
      entity_id:
        - binary_sensor.ihc1_input_08
      to: "on"
      id: Input_08L
      for:
        hours: 0
        minutes: 0
        seconds: 1
      variables:
        action_id: switch.turn_off
        target_ent: switch.ihc1_output_08
    - trigger: state
      entity_id:
        - binary_sensor.ihc1_input_16
      to: "off"
      id: Input_16K
      from: "on"
      variables:
        action_id: switch.turn_on
        target_ent: switch.highnrswitch
    - trigger: state
      entity_id:
        - binary_sensor.ihc1_input_16
      to: "on"
      id: Input_16L
      for:
        hours: 0
        minutes: 0
        seconds: 1
      variables:
        action_id: switch.turn_off
        target_ent: switch.highnrswitch
    - trigger: state
      entity_id:
        - binary_sensor.ihc1_input_24
      to: "off"
      id: Input_24K
      from: "on"
      variables:
        action_id: switch.toggle
        target_ent: switch.ihc1_output_24
    - trigger: state
      entity_id:
        - binary_sensor.ihc1_input_24
      to: "on"
      id: Input_24L
      for:
        hours: 0
        minutes: 0
        seconds: 1
      variables:
        action_id: switch.turn_off
        target_ent: switch.ihc1_output_24
  condition:
    - condition: or
      conditions:
        - condition: and
          conditions:
            - condition: template
              value_template: >-
                {{ trigger.to_state.last_updated -
                trigger.from_state.last_updated  < as_timedelta("00:00:01")
                }}
            - condition: template
              value_template: "{{ trigger.to_state.state == 'off'}}"
        - condition: and
          conditions:
            - condition: template
              value_template: >-
                {{ trigger.to_state.last_updated -
                trigger.from_state.last_updated  >= as_timedelta("00:00:01")
                    }}
            - condition: template
              value_template: "{{ trigger.to_state.state == 'on'}}"
  sensor:
    - name: LK-Pushbutton-Pressed
      state: "{{ trigger.id }},{{now().strftime('%H:%M:%S')}}"
      attributes:
        trigger-id: "{{ trigger.id }}"
        action-map: "{{ action_id }}"
        target-map: "{{ target_ent }}"
